---
phase: 22-semantic-components
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/workflow/sections/semantic.ts
  - src/workflow/sections/index.ts
  - src/jsx.ts
  - src/ir/nodes.ts
autonomous: true

must_haves:
  truths:
    - "ExecutionContext component accepts paths array and emits execution_context XML"
    - "SuccessCriteria component accepts items array and emits success_criteria XML"
    - "XmlSection component accepts name prop and emits custom XML tag"
  artifacts:
    - path: "src/workflow/sections/semantic.ts"
      provides: "Props interfaces and stub functions for semantic components"
      exports: ["ExecutionContext", "SuccessCriteria", "XmlSection", "ExecutionContextProps", "SuccessCriteriaProps", "SuccessCriteriaItem", "XmlSectionProps"]
    - path: "src/ir/nodes.ts"
      provides: "ExecutionContextNode, SuccessCriteriaNode IR node types"
      contains: "ExecutionContextNode"
  key_links:
    - from: "src/jsx.ts"
      to: "src/workflow/sections/semantic.ts"
      via: "re-export"
      pattern: "export.*ExecutionContext"
    - from: "src/workflow/sections/index.ts"
      to: "src/workflow/sections/semantic.ts"
      via: "re-export"
      pattern: "export.*semantic"
---

<objective>
Add ExecutionContext, SuccessCriteria, and XmlSection component definitions with TypeScript types and IR nodes.

Purpose: These semantic components emit XML-wrapped content for common Claude Code patterns - execution context paths and success criteria checklists.
Output: Component stubs, props interfaces, and IR node definitions ready for transformer/emitter in Plan 02.
</objective>

<execution_context>
@/Users/glenninizan/.claude/get-shit-done/workflows/execute-plan.md
@/Users/glenninizan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/22-semantic-components/22-CONTEXT.md
@.planning/phases/22-semantic-components/22-RESEARCH.md

@src/primitives/structured.ts
@src/ir/nodes.ts
@src/jsx.ts
@src/workflow/sections/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create semantic.ts with component stubs and interfaces</name>
  <files>src/workflow/sections/semantic.ts</files>
  <action>
Create `src/workflow/sections/semantic.ts` following the pattern in `src/primitives/structured.ts`.

Define interfaces:
```typescript
// ExecutionContext
interface ExecutionContextProps {
  paths: string[];
  prefix?: string;  // Default: '@'
  children?: ReactNode;  // Optional additional content
}

// SuccessCriteria
interface SuccessCriteriaItem {
  text: string;
  checked?: boolean;
}
interface SuccessCriteriaProps {
  items: (string | SuccessCriteriaItem)[];
}

// XmlSection (generic wrapper)
interface XmlSectionProps {
  name: string;
  children: ReactNode;
}
```

Create stub functions that return `null`:
- `ExecutionContext(_props: ExecutionContextProps): null`
- `SuccessCriteria(_props: SuccessCriteriaProps): null`
- `XmlSection(_props: XmlSectionProps): null`

Add JSDoc comments with `@example` showing expected usage and output.
  </action>
  <verify>TypeScript compiles: `npx tsc --noEmit src/workflow/sections/semantic.ts`</verify>
  <done>semantic.ts exists with ExecutionContext, SuccessCriteria, XmlSection exports and full TypeScript types</done>
</task>

<task type="auto">
  <name>Task 2: Add IR node definitions for semantic components</name>
  <files>src/ir/nodes.ts</files>
  <action>
Add new IR node interfaces to `src/ir/nodes.ts`.

**ExecutionContextNode** - wraps paths in `<execution_context>` XML:
```typescript
export interface ExecutionContextNode {
  kind: 'executionContext';
  paths: string[];
  prefix: string;  // Default '@'
  children: BlockNode[];  // Optional additional content
}
```

**SuccessCriteriaNode** - wraps checkbox items in `<success_criteria>` XML:
```typescript
export interface SuccessCriteriaItemData {
  text: string;
  checked: boolean;
}

export interface SuccessCriteriaNode {
  kind: 'successCriteria';
  items: SuccessCriteriaItemData[];
}
```

Note: XmlSection does NOT need its own IR node - it uses existing `XmlBlockNode` with dynamic `name`.

Add both to the `BlockNode` union type.

Import types in the relevant imports section at top of file.
  </action>
  <verify>TypeScript compiles: `npx tsc --noEmit src/ir/nodes.ts`</verify>
  <done>ExecutionContextNode and SuccessCriteriaNode added to IR, included in BlockNode union</done>
</task>

<task type="auto">
  <name>Task 3: Wire up exports through index and jsx.ts</name>
  <files>src/workflow/sections/index.ts, src/jsx.ts</files>
  <action>
**Update `src/workflow/sections/index.ts`:**
Replace placeholder content with re-exports from semantic.ts:
```typescript
export {
  ExecutionContext,
  SuccessCriteria,
  XmlSection,
  type ExecutionContextProps,
  type SuccessCriteriaProps,
  type SuccessCriteriaItem,
  type XmlSectionProps,
} from './semantic.js';
```

**Update `src/jsx.ts`:**
Add a new section after MCP configuration exports:
```typescript
// ============================================================================
// Sections - Semantic XML Wrapper Components
// ============================================================================

// Semantic section components
export {
  ExecutionContext,
  SuccessCriteria,
  XmlSection,
  type ExecutionContextProps,
  type SuccessCriteriaProps,
  type SuccessCriteriaItem,
  type XmlSectionProps,
} from './workflow/sections/index.js';
```
  </action>
  <verify>Full build passes: `npm run build`</verify>
  <done>Components exported from jsx.ts and importable by user code</done>
</task>

</tasks>

<verification>
1. `npm run build` passes without errors
2. `npx tsc --noEmit` passes
3. New types visible in dist/jsx.d.ts after build
</verification>

<success_criteria>
- ExecutionContext, SuccessCriteria, XmlSection exported from jsx.ts
- ExecutionContextNode, SuccessCriteriaNode in IR nodes.ts with BlockNode union
- TypeScript types enforce correct props at compile time
</success_criteria>

<output>
After completion, create `.planning/phases/22-semantic-components/22-01-SUMMARY.md`
</output>
