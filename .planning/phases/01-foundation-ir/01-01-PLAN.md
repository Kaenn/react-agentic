---
phase: 01-foundation-ir
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - pnpm-lock.yaml
  - tsconfig.json
  - vitest.config.ts
  - src/index.ts
autonomous: true

must_haves:
  truths:
    - "pnpm install completes without errors"
    - "tsc --noEmit passes (TypeScript compiles)"
    - "vitest run executes (test framework functional)"
  artifacts:
    - path: "package.json"
      provides: "Project manifest with dependencies"
      contains: "vitest"
    - path: "tsconfig.json"
      provides: "TypeScript configuration"
      contains: "NodeNext"
    - path: "vitest.config.ts"
      provides: "Test framework configuration"
      contains: "defineConfig"
    - path: "src/index.ts"
      provides: "Entry point for library"
      min_lines: 1
  key_links:
    - from: "package.json"
      to: "tsconfig.json"
      via: "typecheck script"
      pattern: "tsc --noEmit"
    - from: "vitest.config.ts"
      to: "tests/**/*.test.ts"
      via: "test include pattern"
      pattern: "tests/\\*\\*/\\*.test.ts"
---

<objective>
Set up project infrastructure with TypeScript, Vitest, and pnpm.

Purpose: Establish the foundation for all subsequent development with proper tooling and configuration.
Output: Working TypeScript project that compiles, runs tests, and follows modern ESM conventions.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-ir/01-CONTEXT.md
@.planning/phases/01-foundation-ir/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize project with pnpm and install dependencies</name>
  <files>package.json, pnpm-lock.yaml</files>
  <action>
Create package.json with:
- name: "react-agentic"
- version: "0.1.0"
- type: "module" (ESM first)
- main: "dist/index.js"
- types: "dist/index.d.ts"
- bin: { "react-agentic": "dist/cli/index.js" }
- scripts:
  - "build": "tsup"
  - "dev": "tsx watch src/index.ts"
  - "test": "vitest"
  - "test:run": "vitest run"
  - "typecheck": "tsc --noEmit"

Install dependencies via pnpm:
- Production: gray-matter
- Dev: typescript (^5.9.3), vitest (^4.0.17), tsup (^8.5.1), tsx (^4.21.0), @types/node

Use exact versions from RESEARCH.md for consistency.
  </action>
  <verify>
- `pnpm install` completes without errors
- `cat package.json` shows correct structure
- node_modules exists with installed packages
  </verify>
  <done>package.json exists with all dependencies, pnpm-lock.yaml generated</done>
</task>

<task type="auto">
  <name>Task 2: Configure TypeScript and Vitest</name>
  <files>tsconfig.json, vitest.config.ts, src/index.ts</files>
  <action>
Create tsconfig.json with modern ESM settings:
- target: "ES2022"
- module: "NodeNext"
- moduleResolution: "NodeNext"
- declaration: true
- declarationMap: true
- sourceMap: true
- outDir: "./dist"
- rootDir: "./src"
- strict: true
- esModuleInterop: true
- skipLibCheck: true
- forceConsistentCasingInFileNames: true
- jsx: "preserve" (needed for later TSX parsing)
- include: ["src/**/*"]
- exclude: ["node_modules", "dist", "tests"]

Create vitest.config.ts:
- globals: true
- include: ["tests/**/*.test.ts"]
- coverage provider: "v8"
- coverage include: ["src/**/*.ts"]
- coverage exclude: ["src/**/*.d.ts"]

Create src/index.ts as placeholder:
- Export comment indicating future exports
- Single line: `export {};` to make it a module

Create tests/ directory structure:
- tests/emitter/ (empty, for next plan)
  </action>
  <verify>
- `pnpm run typecheck` passes (tsc --noEmit exits 0)
- `pnpm run test:run` executes (may show 0 tests, but framework runs)
  </verify>
  <done>TypeScript compiles, Vitest runs, project structure established</done>
</task>

</tasks>

<verification>
After both tasks complete:
1. `pnpm run typecheck` - TypeScript compilation check passes
2. `pnpm run test:run` - Vitest executes without errors
3. Directory structure exists: src/, tests/emitter/
</verification>

<success_criteria>
- Project compiles with TypeScript (`pnpm run typecheck` exits 0)
- All dependencies installed (`pnpm install` completed)
- Test framework functional (`pnpm run test:run` executes)
- ESM configuration correct (type: "module" in package.json)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-ir/01-01-SUMMARY.md`
</output>
