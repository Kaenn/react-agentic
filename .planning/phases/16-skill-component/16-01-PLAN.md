---
phase: 16-skill-component
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/ir/nodes.ts
  - src/jsx.ts
autonomous: true

must_haves:
  truths:
    - "SkillDocumentNode can be instantiated in IR"
    - "SkillFrontmatterNode captures all skill-specific fields"
    - "SkillFileNode captures generated file metadata"
    - "SkillStaticNode captures static file copy instructions"
    - "Skill/SkillFile/SkillStatic components provide type-safe props"
  artifacts:
    - path: "src/ir/nodes.ts"
      provides: "SkillDocumentNode, SkillFrontmatterNode, SkillFileNode, SkillStaticNode types"
      contains: "SkillDocumentNode"
    - path: "src/jsx.ts"
      provides: "Skill, SkillFile, SkillStatic component exports"
      contains: "SkillProps"
  key_links:
    - from: "src/jsx.ts"
      to: "src/ir/nodes.ts"
      via: "type alignment"
      pattern: "SkillProps.*name.*description"
---

<objective>
Add IR node types and JSX component definitions for Skill, SkillFile, and SkillStatic.

Purpose: Foundation layer for Skill component parsing and transformation
Output: Type definitions that enable compile-time validation of skill authoring
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/16-skill-component/16-RESEARCH.md

# Existing patterns to follow
@src/ir/nodes.ts
@src/jsx.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Skill IR node types to nodes.ts</name>
  <files>src/ir/nodes.ts</files>
  <action>
Add four new node types following the AgentDocumentNode pattern:

1. **SkillFrontmatterNode** (like AgentFrontmatterNode):
```typescript
export interface SkillFrontmatterNode {
  kind: 'skillFrontmatter';
  name: string;                        // Required: skill directory name
  description: string;                 // Required: what/when description
  disableModelInvocation?: boolean;    // Optional: prevent auto-invoke
  userInvocable?: boolean;             // Optional: hide from / menu
  allowedTools?: string[];             // Optional: tools without permission
  argumentHint?: string;               // Optional: [filename] hint
  model?: string;                      // Optional: model override
  context?: 'fork';                    // Optional: run in subagent
  agent?: string;                      // Optional: which subagent
}
```

2. **SkillFileNode** (for generated files within skill):
```typescript
export interface SkillFileNode {
  kind: 'skillFile';
  name: string;                        // Output filename (e.g., "reference.md")
  children: BlockNode[];               // Content to generate
}
```

3. **SkillStaticNode** (for static file copying):
```typescript
export interface SkillStaticNode {
  kind: 'skillStatic';
  src: string;                         // Source path relative to TSX file
  dest?: string;                       // Optional destination path override
}
```

4. **SkillDocumentNode** (document root):
```typescript
export interface SkillDocumentNode {
  kind: 'skillDocument';
  frontmatter: SkillFrontmatterNode;   // Required (like Agent)
  children: BlockNode[];               // SKILL.md body content
  files: SkillFileNode[];              // Generated files from SkillFile
  statics: SkillStaticNode[];          // Static files from SkillStatic
}
```

Update the IRNode union to include:
- SkillDocumentNode
- SkillFrontmatterNode
- SkillFileNode
- SkillStaticNode
  </action>
  <verify>Run `npx tsc --noEmit` - no type errors in nodes.ts</verify>
  <done>All four Skill node types defined and included in IRNode union</done>
</task>

<task type="auto">
  <name>Task 2: Add Skill component exports to jsx.ts</name>
  <files>src/jsx.ts</files>
  <action>
Add component props interfaces and stub functions following the Agent/Command pattern:

1. **SkillProps** interface:
```typescript
export interface SkillProps {
  /** Skill name (directory name, lowercase-hyphenated) */
  name: string;
  /** What the skill does and when to use it */
  description: string;
  /** Prevent Claude from auto-invoking (default: false) */
  disableModelInvocation?: boolean;
  /** Hide from slash-command menu (default: true) */
  userInvocable?: boolean;
  /** Tools allowed without permission prompt */
  allowedTools?: string[];
  /** Argument placeholder hint (e.g., "[filename]") */
  argumentHint?: string;
  /** Model override for skill execution */
  model?: string;
  /** Run in subagent context */
  context?: 'fork';
  /** Subagent type when context='fork' */
  agent?: string;
  /** Skill body content */
  children?: ReactNode;
}
```

2. **SkillFileProps** interface:
```typescript
export interface SkillFileProps {
  /** Output filename (e.g., "reference.md", "examples/basic.md") */
  name: string;
  /** File content */
  children?: ReactNode;
}
```

3. **SkillStaticProps** interface:
```typescript
export interface SkillStaticProps {
  /** Source path relative to TSX file */
  src: string;
  /** Destination path relative to skill directory (defaults to src) */
  dest?: string;
}
```

4. Add compile-time stub functions (they return null like other components):
```typescript
export function Skill(_props: SkillProps): null {
  return null;
}

export function SkillFile(_props: SkillFileProps): null {
  return null;
}

export function SkillStatic(_props: SkillStaticProps): null {
  return null;
}
```

Add JSDoc comments following the existing Agent/Command documentation pattern.
  </action>
  <verify>Run `npx tsc --noEmit` - no type errors in jsx.ts</verify>
  <done>Skill, SkillFile, SkillStatic components exported with typed props</done>
</task>

</tasks>

<verification>
```bash
# Type check passes
npx tsc --noEmit

# New types are exported
grep -n "SkillDocumentNode\|SkillFrontmatterNode\|SkillFileNode\|SkillStaticNode" src/ir/nodes.ts

# New components are exported
grep -n "export function Skill\|export function SkillFile\|export function SkillStatic" src/jsx.ts
```
</verification>

<success_criteria>
- [ ] SkillDocumentNode, SkillFrontmatterNode, SkillFileNode, SkillStaticNode types defined
- [ ] IRNode union includes all new skill node types
- [ ] Skill, SkillFile, SkillStatic components exported from jsx.ts
- [ ] All props typed with JSDoc documentation
- [ ] TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/16-skill-component/16-01-SUMMARY.md`
</output>
