---
phase: 16-skill-component
plan: 05
type: execute
wave: 4
depends_on: ["16-03", "16-04"]
files_modified:
  - src/app/test-skill.tsx
  - docs/skill.md
autonomous: true

must_haves:
  truths:
    - "Test skill builds without errors"
    - "SKILL.md generated in .claude/skills/deploy/"
    - "Frontmatter uses kebab-case keys"
    - "Documentation covers skill authoring patterns"
  artifacts:
    - path: "src/app/test-skill.tsx"
      provides: "Integration test for skill build"
      contains: "<Skill"
    - path: "docs/skill.md"
      provides: "User documentation for skill component"
      contains: "SkillFile"
  key_links:
    - from: "src/app/test-skill.tsx"
      to: ".claude/skills/deploy/SKILL.md"
      via: "build command"
      pattern: "name.*deploy"
---

<objective>
Create integration test and user documentation for Skill component.

Purpose: Validate end-to-end skill compilation and document usage patterns
Output: Working test skill + comprehensive documentation
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/16-skill-component/16-03-SUMMARY.md
@.planning/phases/16-skill-component/16-04-SUMMARY.md

# Documentation pattern
@docs/command.md
@docs/agent.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create test-skill.tsx integration test</name>
  <files>src/app/test-skill.tsx</files>
  <action>
Create a test skill that exercises all Skill features:

```tsx
/**
 * Test Skill - Integration test for Skill component
 *
 * Run: node dist/cli/index.js build src/app/test-skill.tsx
 * Output: .claude/skills/deploy/SKILL.md
 */

import { Skill, SkillFile, SkillStatic, Markdown } from '../jsx.js';

export default function DeploySkill() {
  return (
    <Skill
      name="deploy"
      description="Deploy the application to production. Use when the user asks to deploy, release, or publish code."
      disableModelInvocation={true}
      allowedTools={['Read', 'Bash(git:*)', 'Bash(npm:*)']}
      argumentHint="[environment]"
    >
      <h1>Deploy Skill</h1>

      <Markdown>{`
## Overview

Deploy $ARGUMENTS to the target environment.

## Process

1. Validate environment variable
2. Run pre-flight checks
3. Build the application
4. Deploy to target

## Reference

See the deployment scripts in the scripts/ directory.
`}</Markdown>

      <SkillFile name="reference.md">
        <Markdown>{`
# Deployment Reference

## Environments

- **staging**: Pre-production testing
- **production**: Live environment

## Scripts

- \`scripts/validate.sh\` - Validate deployment prerequisites
- \`scripts/deploy.sh\` - Main deployment script
`}</Markdown>
      </SkillFile>

    </Skill>
  );
}
```

Note: SkillStatic test would require actual static files to exist. For the test, we demonstrate the pattern without actually including static files (avoids build failure on missing files).
  </action>
  <verify>
```bash
# Build the project first
npm run build

# Run build on test skill
node dist/cli/index.js build src/app/test-skill.tsx

# Verify output
cat .claude/skills/deploy/SKILL.md
cat .claude/skills/deploy/reference.md
```
  </verify>
  <done>Test skill builds successfully, produces SKILL.md and reference.md</done>
</task>

<task type="auto">
  <name>Task 2: Create skill.md documentation</name>
  <files>docs/skill.md</files>
  <action>
Create comprehensive documentation following the pattern of command.md and agent.md:

```markdown
# Skill Component

Build Claude Code skills with TSX for type-safe, compile-time validated skill definitions.

## Quick Start

```tsx
import { Skill, Markdown } from 'react-agentic';

export default function MySkill() {
  return (
    <Skill
      name="my-skill"
      description="What this skill does. Use when the user asks to..."
    >
      <Markdown>{\`
# My Skill

Instructions for Claude...
\`}</Markdown>
    </Skill>
  );
}
```

Build:
```bash
npx react-agentic build src/app/my-skill.tsx
# Output: .claude/skills/my-skill/SKILL.md
```

## Props

### Required Props

| Prop | Type | Description |
|------|------|-------------|
| `name` | `string` | Skill directory name (lowercase, numbers, hyphens) |
| `description` | `string` | What the skill does and when to use it |

### Optional Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `disableModelInvocation` | `boolean` | `false` | Prevent Claude from auto-invoking |
| `userInvocable` | `boolean` | `true` | Show in slash-command menu |
| `allowedTools` | `string[]` | `[]` | Tools allowed without permission |
| `argumentHint` | `string` | - | Placeholder hint (e.g., `[filename]`) |
| `model` | `string` | - | Model override |
| `context` | `'fork'` | - | Run in subagent |
| `agent` | `string` | - | Subagent type when context='fork' |

## SkillFile Component

Generate additional files in the skill directory.

```tsx
<Skill name="deploy" description="...">
  {/* Main SKILL.md content */}
  <Markdown>...</Markdown>

  {/* Additional file: .claude/skills/deploy/reference.md */}
  <SkillFile name="reference.md">
    <Markdown>{\`# Reference documentation...\`}</Markdown>
  </SkillFile>

  {/* Nested path: .claude/skills/deploy/examples/basic.md */}
  <SkillFile name="examples/basic.md">
    <Markdown>{\`# Basic example...\`}</Markdown>
  </SkillFile>
</Skill>
```

### SkillFile Props

| Prop | Type | Description |
|------|------|-------------|
| `name` | `string` | Output filename (supports paths like `examples/basic.md`) |
| `children` | `ReactNode` | File content |

## SkillStatic Component

Copy static files from your source to the skill directory.

```tsx
<Skill name="deploy" description="...">
  <Markdown>...</Markdown>

  {/* Copy scripts/deploy.sh to .claude/skills/deploy/scripts/deploy.sh */}
  <SkillStatic src="scripts/deploy.sh" />

  {/* Copy with different destination */}
  <SkillStatic src="templates/config.json" dest="config.json" />
</Skill>
```

### SkillStatic Props

| Prop | Type | Description |
|------|------|-------------|
| `src` | `string` | Source path relative to TSX file |
| `dest` | `string` | Destination path (defaults to `src`) |

## Output Structure

A skill with all features:

```tsx
<Skill name="deploy" ...>
  <Markdown>Main content</Markdown>
  <SkillFile name="reference.md">...</SkillFile>
  <SkillFile name="examples/basic.md">...</SkillFile>
  <SkillStatic src="scripts/deploy.sh" />
</Skill>
```

Produces:

```
.claude/skills/deploy/
├── SKILL.md              # Main skill file (from Skill children)
├── reference.md          # From SkillFile
├── examples/
│   └── basic.md          # From SkillFile with path
└── scripts/
    └── deploy.sh         # From SkillStatic
```

## Frontmatter Format

The generated SKILL.md uses Claude Code's required format:

```yaml
---
name: deploy
description: Deploy the application. Use when user asks to deploy...
disable-model-invocation: true
allowed-tools:
  - Read
  - Bash(git:*)
argument-hint: '[environment]'
---
```

Note: Props use camelCase in TSX (`disableModelInvocation`) but emit as kebab-case in YAML (`disable-model-invocation`).

## Variables in Skills

Use `$ARGUMENTS` to access user-provided arguments:

```tsx
<Skill
  name="search"
  description="Search codebase"
  argumentHint="[query]"
>
  <Markdown>{\`
Search for: $ARGUMENTS

Use Grep to find matches...
\`}</Markdown>
</Skill>
```

## Complete Example

```tsx
import { Skill, SkillFile, SkillStatic, Markdown } from 'react-agentic';

export default function DeploySkill() {
  return (
    <Skill
      name="deploy"
      description="Deploy the application to production. Use when the user asks to deploy, release, or publish code."
      disableModelInvocation={true}
      allowedTools={['Read', 'Bash(git:*)', 'Bash(npm:*)']}
      argumentHint="[environment]"
    >
      <h1>Deploy</h1>

      <Markdown>{\`
## Process

1. Validate environment: $ARGUMENTS
2. Run tests
3. Build application
4. Deploy

## Reference

See [reference.md](reference.md) for environment details.
\`}</Markdown>

      <SkillFile name="reference.md">
        <Markdown>{\`
# Deployment Reference

## Environments

| Name | URL |
|------|-----|
| staging | staging.example.com |
| production | example.com |
\`}</Markdown>
      </SkillFile>

      <SkillStatic src="scripts/deploy.sh" />
      <SkillStatic src="scripts/validate.sh" />
    </Skill>
  );
}
```

## Best Practices

1. **Descriptive names**: Use clear, action-oriented names (`deploy`, `test`, `migrate`)
2. **Detailed descriptions**: Explain what the skill does AND when to use it
3. **Tool restrictions**: List only necessary tools in `allowedTools`
4. **Organize with SkillFile**: Split long reference material into separate files
5. **Use SkillStatic for scripts**: Keep complex bash scripts as separate files

## See Also

- [Command Component](./command.md) - Slash commands
- [Agent Component](./agent.md) - Spawnable agents
- [Variables](./variables.md) - Shell variable handling
```
  </action>
  <verify>
```bash
# Verify documentation file exists and has content
wc -l docs/skill.md
head -50 docs/skill.md
```
  </verify>
  <done>Comprehensive skill documentation created covering all features and patterns</done>
</task>

</tasks>

<verification>
```bash
# Build project
npm run build

# Build test skill
node dist/cli/index.js build src/app/test-skill.tsx

# Verify outputs
ls -la .claude/skills/deploy/
cat .claude/skills/deploy/SKILL.md
cat .claude/skills/deploy/reference.md

# Verify frontmatter format (kebab-case keys)
head -10 .claude/skills/deploy/SKILL.md

# Verify documentation
ls -la docs/skill.md
```
</verification>

<success_criteria>
- [ ] test-skill.tsx builds without errors
- [ ] .claude/skills/deploy/SKILL.md generated with correct frontmatter
- [ ] .claude/skills/deploy/reference.md generated from SkillFile
- [ ] Frontmatter uses kebab-case keys (disable-model-invocation, allowed-tools)
- [ ] docs/skill.md documents all props and features
- [ ] Documentation follows existing patterns (command.md, agent.md)
</success_criteria>

<output>
After completion, create `.planning/phases/16-skill-component/16-05-SUMMARY.md`
</output>
