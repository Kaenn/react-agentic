---
phase: 21-structured-props
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/ir/nodes.ts
  - src/primitives/structured.ts
  - src/jsx.ts
autonomous: true

must_haves:
  truths:
    - "TableNode IR type exists with headers, rows, align, emptyCell properties"
    - "ListNode IR type extended with start property for ordered lists"
    - "Table component accepts headers, rows, align, emptyCell props"
    - "List component accepts items, ordered, start props"
    - "Components exported from jsx.ts"
  artifacts:
    - path: "src/ir/nodes.ts"
      provides: "TableNode interface with headers, rows, align, emptyCell"
      contains: "interface TableNode"
    - path: "src/primitives/structured.ts"
      provides: "Table and List component stubs with TypeScript types"
      exports: ["Table", "List", "TableProps", "ListProps"]
    - path: "src/jsx.ts"
      provides: "Re-exports for Table and List components"
      contains: "Table"
  key_links:
    - from: "src/jsx.ts"
      to: "src/primitives/structured.ts"
      via: "export"
      pattern: "from './primitives/structured.js'"
    - from: "src/ir/nodes.ts"
      to: "BlockNode union"
      via: "type union"
      pattern: "TableNode"
---

<objective>
Add TableNode IR type and Table/List JSX component stubs with TypeScript prop types.

Purpose: Enable type-safe Table and List components that accept structured array props instead of manual JSX children. This plan creates the type foundation; Plan 02 implements transformation/emission.

Output: TableNode added to IR, Table and List components with typed props exported from jsx.ts.
</objective>

<execution_context>
@/Users/glenninizan/.claude/get-shit-done/workflows/execute-plan.md
@/Users/glenninizan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/21-structured-props/21-CONTEXT.md
@.planning/phases/21-structured-props/21-RESEARCH.md
@src/ir/nodes.ts
@src/primitives/markdown.ts
@src/jsx.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add TableNode IR type to nodes.ts</name>
  <files>src/ir/nodes.ts</files>
  <action>
Add TableNode interface to the Block Nodes section of nodes.ts:

```typescript
/**
 * Markdown table with optional headers and column alignment
 */
export interface TableNode {
  kind: 'table';
  headers?: string[];                                    // Optional header row
  rows: string[][];                                       // Data rows (can be empty)
  align?: ('left' | 'center' | 'right')[];               // Per-column alignment
  emptyCell?: string;                                     // Empty cell content (default: "")
}
```

Add TableNode to the BlockNode union type.

Also extend existing ListNode with optional `start` property for ordered list numbering:
```typescript
export interface ListNode {
  kind: 'list';
  ordered: boolean;
  items: ListItemNode[];
  start?: number;                                         // Start number for ordered lists
}
```
  </action>
  <verify>Run `npm run build` - should compile without errors. Check nodes.ts contains TableNode interface and BlockNode includes TableNode.</verify>
  <done>TableNode interface exists in nodes.ts, ListNode has start property, both integrated into BlockNode union.</done>
</task>

<task type="auto">
  <name>Task 2: Create Table and List component stubs in primitives/structured.ts</name>
  <files>src/primitives/structured.ts</files>
  <action>
Create new file `src/primitives/structured.ts` with Table and List component stubs following the pattern from primitives/markdown.ts:

```typescript
/**
 * JSX component stubs for react-agentic - Structured data components
 *
 * These components are compile-time only - they're transformed by the transpiler
 * and never executed at runtime. They exist to provide TypeScript type checking.
 */

/**
 * Alignment options for table columns
 */
export type TableAlignment = 'left' | 'center' | 'right';

/**
 * Props for the Table component
 */
export interface TableProps {
  /** Optional header row */
  headers?: string[];
  /** Data rows - each row is an array of cell values */
  rows: (string | number)[][];
  /** Per-column alignment (defaults to 'left' for all columns) */
  align?: TableAlignment[];
  /** Content for empty cells (defaults to empty string) */
  emptyCell?: string;
}

/**
 * Props for the List component
 */
export interface ListProps {
  /** List items */
  items: (string | number)[];
  /** Use ordered (numbered) list (default: false for bullet list) */
  ordered?: boolean;
  /** Starting number for ordered lists (default: 1) */
  start?: number;
}

/**
 * Table component - emits markdown table from structured props
 *
 * This is a compile-time component transformed by react-agentic.
 * It's never executed at runtime.
 *
 * @example
 * <Table
 *   headers={["Name", "Age", "City"]}
 *   rows={[
 *     ["Alice", 30, "NYC"],
 *     ["Bob", 25, "LA"],
 *   ]}
 *   align={["left", "right", "center"]}
 * />
 *
 * Outputs:
 * | Name | Age | City |
 * | :--- | ---: | :---: |
 * | Alice | 30 | NYC |
 * | Bob | 25 | LA |
 */
export function Table(_props: TableProps): null {
  return null;
}

/**
 * List component - emits markdown list from structured props
 *
 * This is a compile-time component transformed by react-agentic.
 * It's never executed at runtime.
 *
 * @example
 * <List items={["First item", "Second item", "Third item"]} />
 *
 * Outputs:
 * - First item
 * - Second item
 * - Third item
 *
 * @example
 * <List items={["Step one", "Step two"]} ordered start={5} />
 *
 * Outputs:
 * 5. Step one
 * 6. Step two
 */
export function List(_props: ListProps): null {
  return null;
}
```
  </action>
  <verify>File exists at src/primitives/structured.ts. Run `npx tsc --noEmit` to verify TypeScript compiles.</verify>
  <done>Table and List components defined with typed props in primitives/structured.ts.</done>
</task>

<task type="auto">
  <name>Task 3: Add Table and List exports to jsx.ts</name>
  <files>src/jsx.ts</files>
  <action>
Add export for Table and List components from primitives/structured.ts. Place after the existing Markdown/XmlBlock exports in the Primitives section:

```typescript
// Structured data components
export {
  Table,
  List,
  type TableProps,
  type ListProps,
  type TableAlignment,
} from './primitives/structured.js';
```

Follow the existing pattern of explicit named exports with type annotations.
  </action>
  <verify>Run `npm run build` - should compile without errors. Check that Table and List are exported from jsx.ts.</verify>
  <done>Table and List components exported from jsx.ts, available for use in TSX files.</done>
</task>

</tasks>

<verification>
1. `npm run build` passes without errors
2. TableNode interface exists in src/ir/nodes.ts with correct properties
3. ListNode has `start?: number` property
4. TableNode is in BlockNode union
5. src/primitives/structured.ts exists with Table and List components
6. jsx.ts exports Table, List, TableProps, ListProps, TableAlignment
</verification>

<success_criteria>
- TableNode IR type defined with headers?, rows, align?, emptyCell? properties
- ListNode extended with start? property
- Table component accepts TableProps with compile-time type checking
- List component accepts ListProps with compile-time type checking
- Both components exported from jsx.ts
- Build passes with no TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/21-structured-props/21-01-SUMMARY.md`
</output>
