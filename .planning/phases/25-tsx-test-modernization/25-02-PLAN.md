---
phase: 25-tsx-test-modernization
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/scenarios/9.1-orchestrating-workflow.tsx
  - src/app/basic/test-simple-orchestrator.tsx
  - src/app/scenarios/9.3-multi-agent-sequential.tsx
autonomous: true

must_haves:
  truths:
    - "ExecutionContext component used in at least one file"
    - "SuccessCriteria component used in at least one file"
    - "Step component used in at least one file"
  artifacts:
    - path: "src/app/scenarios/9.1-orchestrating-workflow.tsx"
      provides: "Workflow test with semantic components"
      contains: ["<ExecutionContext", "<SuccessCriteria", "<Step"]
    - path: "src/app/scenarios/9.3-multi-agent-sequential.tsx"
      provides: "Multi-agent test with Step components"
      contains: "<Step"
  key_links:
    - from: "src/app/scenarios/9.1-orchestrating-workflow.tsx"
      to: "src/jsx.js"
      via: "import semantic components"
      pattern: "import.*\\{.*ExecutionContext.*\\}.*from"
---

<objective>
Update scenario test files to use semantic components (ExecutionContext, SuccessCriteria, Step)

Purpose: Demonstrate v2.0 semantic section components that emit XML-wrapped content for common Claude Code patterns.

Output: 3 updated scenario files demonstrating ExecutionContext, SuccessCriteria, and Step component usage
</objective>

<execution_context>
@/Users/glenninizan/.claude/get-shit-done/workflows/execute-plan.md
@/Users/glenninizan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@docs/semantic-components.md
@src/app/verification/test-semantic-components.tsx
@src/app/verification/test-step.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add semantic components to orchestrating workflow test</name>
  <files>src/app/scenarios/9.1-orchestrating-workflow.tsx</files>
  <action>
Update file header comment to document v2.0 features demonstrated.

Add to imports: `import { Command, SpawnAgent, Assign, useVariable, useOutput, OnStatus, ExecutionContext, SuccessCriteria, Step, List, Table } from '../../jsx.js';`

1. Add ExecutionContext at the top of the content (after first paragraph):
```tsx
<ExecutionContext paths={[
  "src/app/scenarios/9.1-workflow-agent.tsx",
  "docs/communication.md",
]} />
```

2. Replace "Test Objectives" section with Step component:
```tsx
<Step name="Test Objectives" number={1}>
  <List
    items={[
      "Variable is assigned BEFORE agent spawn",
      "Agent receives the variable values (not just references)",
      "OnStatus handler receives agent output fields",
      "Field interpolation works correctly in handlers",
      "Complete workflow produces coherent end result",
    ]}
    ordered
  />
</Step>
```

3. Replace numbered h2 sections (Step 1, Step 2, etc.) with Step components:
```tsx
<Step name="Collect Input via Variables" number={2}>
  <p>First, we collect and assign input values...</p>
  ...
</Step>
```

4. Add SuccessCriteria at the end before the final YAML block:
```tsx
<SuccessCriteria items={[
  "All variables assigned before agent spawn",
  "Agent received actual values",
  "Correct OnStatus handler executed",
  "Field interpolation worked",
  "Complete YAML report generated",
]} />
```
  </action>
  <verify>npm run build && grep -q "ExecutionContext" src/app/scenarios/9.1-orchestrating-workflow.tsx</verify>
  <done>9.1-orchestrating-workflow.tsx demonstrates ExecutionContext, SuccessCriteria, and Step components</done>
</task>

<task type="auto">
  <name>Task 2: Add Step components to multi-agent sequential test</name>
  <files>src/app/scenarios/9.3-multi-agent-sequential.tsx</files>
  <action>
Update file header comment to document v2.0 features demonstrated.

Add to imports: `import { Command, SpawnAgent, useOutput, OnStatus, Step, List } from '../../jsx.js';`

Replace the numbered workflow sections with Step components:

```tsx
// Before:
<h2>Step 1: Spawn Agent A</h2>
...
<h2>Step 2: Spawn Agent B</h2>
...
<h2>Step 3: Spawn Agent C</h2>

// After:
<Step name="Spawn Agent A" number={1}>
  <p>First agent in the chain...</p>
  <SpawnAgent ... />
</Step>

<Step name="Spawn Agent B" number={2} variant="bold">
  <p>Second agent receives output from A...</p>
  <SpawnAgent ... />
</Step>

<Step name="Spawn Agent C" number={3} variant="bold">
  <p>Third agent completes the chain...</p>
  <SpawnAgent ... />
</Step>
```

Also replace any manual `<ol>` lists with `<List items={[...]} ordered />`.
  </action>
  <verify>npm run build && grep -q "&lt;Step" src/app/scenarios/9.3-multi-agent-sequential.tsx</verify>
  <done>9.3-multi-agent-sequential.tsx uses Step components for workflow stages</done>
</task>

<task type="auto">
  <name>Task 3: Add semantic components to simple orchestrator test</name>
  <files>src/app/basic/test-simple-orchestrator.tsx</files>
  <action>
Update file header comment to document v2.0 features demonstrated.

Add to imports: `import { Command, SpawnAgent, ExecutionContext, SuccessCriteria, Step } from '../../jsx.js';`

1. Add ExecutionContext near the top:
```tsx
<ExecutionContext paths={[
  "src/app/basic/simple-orchestrator-agent.tsx",
]} />
```

2. If there are numbered sections, wrap them with Step:
```tsx
<Step name="Verify Timestamp" number={1}>
  <p>Agent should return current timestamp...</p>
</Step>
```

3. Add SuccessCriteria at the end:
```tsx
<SuccessCriteria items={[
  "Agent was successfully spawned",
  "Timestamp returned matches current time",
  "Output format is valid ISO 8601",
]} />
```

Keep it minimal - this is a simple test file, so light touch.
  </action>
  <verify>npm run build && grep -q "ExecutionContext\|SuccessCriteria" src/app/basic/test-simple-orchestrator.tsx</verify>
  <done>test-simple-orchestrator.tsx demonstrates semantic components in minimal context</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. Run `npm run build` - should complete without errors
2. Run `node dist/cli/index.js build src/app/scenarios/9.1-orchestrating-workflow.tsx` - verify semantic XML output
3. Grep files for ExecutionContext, SuccessCriteria, Step usage
</verification>

<success_criteria>
- [ ] All updated files build successfully
- [ ] ExecutionContext used in at least 2 files
- [ ] SuccessCriteria used in at least 2 files
- [ ] Step component used in at least 2 files
- [ ] Each updated file has v2.0 feature documentation in header comment
</success_criteria>

<output>
After completion, create `.planning/phases/25-tsx-test-modernization/25-02-SUMMARY.md`
</output>
