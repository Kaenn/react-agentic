# Requirements Archive: v1.8 Scoped State Skills

**Archived:** 2026-01-26
**Status:** ✅ SHIPPED

This is the archived requirements specification for v1.8.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: React Agentic v1.8

**Defined:** 2026-01-22
**Core Value:** Compile-time safety for Claude Code commands — malformed commands fail at build time, not runtime.

## v1.8 Requirements (Scoped State Skills)

### State Component

- [x] **SSTATE-01**: `<State name="releases" provider="sqlite" config={{...}}>` defines a state with provider binding
- [x] **SSTATE-02**: State component auto-generates CRUD skills: `releases.init`, `releases.read`, `releases.write`, `releases.delete`
- [x] **SSTATE-03**: `<Operation name="record">` defines custom semantic operations with SQL templates
- [x] **SSTATE-04**: Each skill emits deterministic bash/SQL code with no AI interpretation required
- [x] **SSTATE-05**: SQLite provider generates sqlite3 CLI skills with JSON output
- [x] **SSTATE-06**: Skills are self-contained with argument parsing and error handling
- [x] **SSTATE-07**: Build process outputs to `.claude/skills/{state-name}.{operation}.md`
- [x] **SSTATE-08**: TypeScript interface defines state shape for SQL schema generation

## Prior Milestone Requirements (Complete)

### v1.7 MCP Configuration (Phase 18)

- [x] **MCP-01**: `<MCPServer name="sqlite" type="stdio" command="npx" args={[...]} />` defines MCP server
- [x] **MCP-02**: MCPServer supports `type="stdio"` with command/args and `type="sse"` with url
- [x] **MCP-03**: Optional env prop passes environment variables to server process
- [x] **MCP-04**: Build generates/updates `.claude/settings.json` mcpServers section
- [x] **MCP-05**: Multiple MCPServer components merge into single settings.json
- [x] **MCP-06**: Existing settings.json content preserved (only mcpServers section updated)

### v1.6 State System (Phase 17)

- [x] **STATE-01**: `useStateRef<TSchema>(key)` creates typed state reference for compile-time validation
- [x] **STATE-02**: `<ReadState state={ref}>` reads full state or nested field with compile-time type checking
- [x] **STATE-03**: `<WriteState state={ref} field="path" value={val}>` writes single field with type validation
- [x] **STATE-04**: `<WriteState state={ref} merge={partial}>` merges partial updates to state
- [x] **STATE-05**: FileAdapter persists state to JSON file with create-if-missing behavior
- [x] **STATE-06**: CLI skills `/react-agentic:state-read` and `/react-agentic:state-write` provide direct access

### v1.5 Skill System (Phase 16)

- [x] **SKILL-01**: `<Skill name="deploy" ...>` outputs to `.claude/skills/deploy/SKILL.md`
- [x] **SKILL-02**: Skill frontmatter includes name, description, disableModelInvocation, allowedTools
- [x] **SKILL-03**: `<SkillFile name="reference.md">` generates additional files in skill directory
- [x] **SKILL-04**: `<SkillStatic src="scripts/validate.sh" />` copies static files from source
- [x] **SKILL-05**: Skill body content renders as markdown in SKILL.md
- [x] **SKILL-06**: Build process handles multi-file skill output (SKILL.md + supporting files)

### v1.4 Agent Output Management (Phases 14-15)

- [x] **OUTPUT-01**: Standard `AgentStatus` type with HTTP-like codes (SUCCESS, BLOCKED, NOT_FOUND, ERROR, CHECKPOINT)
- [x] **OUTPUT-02**: `BaseOutput` interface with `status: AgentStatus` and optional `message: string`
- [x] **OUTPUT-03**: Agent output types extend `BaseOutput` with status-specific extra fields
- [x] **OUTPUT-04**: `<Agent<TInput, TOutput>>` infers output schema from TOutput type parameter
- [x] **OUTPUT-05**: Emitter auto-generates `<structured_returns>` section from output type
- [x] **OUTPUT-06**: `useOutput(AgentRef)` hook returns typed accessor for spawned agent's output
- [x] **OUTPUT-07**: `<OnStatus>` component accepts `output` prop (from useOutput) and `status` prop
- [x] **OUTPUT-08**: `<OnStatus>` children render conditionally based on agent return status
- [x] **OUTPUT-09**: Output field interpolation in OnStatus children: `{output.confidence}`, `{output.findings}`
- [x] **OUTPUT-10**: Emitter generates status-based conditional prose blocks from OnStatus components

### v1.3 Conditional Logic (Phase 13)

- [x] **COND-01**: `<If>` component accepts `test` prop (string shell expression)
- [x] **COND-02**: `<If>` component accepts `test` prop as VariableRef comparison
- [x] **COND-03**: `<If>` children render as "then" block content
- [x] **COND-04**: `<Else>` component provides "otherwise" content
- [x] **COND-05**: Nested `<If>` components produce readable conditional chains
- [x] **COND-06**: Variable interpolation in test props preserved at emit time

### v1.2 Type-Safe Communication (Phase 12)

- [x] **INPUT-01**: SpawnAgent accepts `input` prop as VariableRef OR object literal
- [x] **INPUT-02**: `input` prop auto-generates structured prompt from Agent's interface contract
- [x] **INPUT-03**: SpawnAgent children become optional extra instructions
- [x] **INPUT-04**: Compiler errors if `input` type doesn't match Agent's exported interface
- [x] **INPUT-05**: Existing `prompt` prop deprecated but still functional

### v1.1 Agent Framework (Phases 8-11)

- [x] All 21 requirements complete (AGENT-*, SPAWN-*, VALID-*, IR-*)

### v1.0 MVP (Phases 1-7)

- [x] All 12 core requirements complete (TSX pipeline, CLI, elements, composition)

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| SSTATE-01 | Phase 19 | Complete |
| SSTATE-02 | Phase 19 | Complete |
| SSTATE-03 | Phase 19 | Complete |
| SSTATE-04 | Phase 19 | Complete |
| SSTATE-05 | Phase 19 | Complete |
| SSTATE-06 | Phase 19 | Complete |
| SSTATE-07 | Phase 19 | Complete |
| SSTATE-08 | Phase 19 | Complete |

**Coverage:**
- v1.8 requirements: 8 total (complete)
- All prior milestones: Complete

---

## Milestone Summary

**Shipped:** 8 of 8 v1.8 requirements
**Adjusted:** None
**Dropped:** None

---
*Archived: 2026-01-26 as part of v1.8 milestone completion*
