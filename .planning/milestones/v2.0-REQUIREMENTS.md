# Requirements Archive: v2.0 TSX Syntax Improvements

**Archived:** 2026-01-31
**Status:** SHIPPED

This is the archived requirements specification for v2.0.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

## Code Organization

- [x] **ORG-01**: Module structure splits jsx.ts into primitives/ and workflow/ directories
- [x] **ORG-02**: Central index.ts re-exports all components from both directories
- [x] **ORG-03**: workflow/sections/ subdirectory contains semantic XML wrapper components

## Semantic Components

- [x] **SEM-01**: ExecutionContext component accepts `paths: string[]` prop and emits `<execution_context>` with @ imports
- [x] **SEM-02**: SuccessCriteria component accepts `items: string[]` prop and emits `<success_criteria>` with checkbox list
- [x] **SEM-03**: OfferNext component accepts `routes: OfferNextRoute[]` prop and emits typed route navigation section
- [x] **SEM-04**: DeviationRules component emits `<deviation_rules>` section with children content
- [x] **SEM-05**: CommitRules component emits `<commit_rules>` section with children content
- [x] **SEM-06**: WaveExecution component emits `<wave_execution>` section with children content
- [x] **SEM-07**: CheckpointHandling component emits `<checkpoint_handling>` section with children content

## Structured Props

- [x] **PROP-01**: Table component accepts `headers: string[]` and `rows: string[][]` props and emits markdown table
- [x] **PROP-02**: List component accepts `items: string[]` prop and emits markdown bullet list

## Context Access

- [x] **CTX-01**: Command component supports optional render props pattern `{(ctx) => children}` with typed context
- [x] **CTX-02**: Agent component supports optional render props pattern `{(ctx) => children}` with typed context
- [x] **CTX-03**: Workflow components (Bash, Loop, If) accept explicit generic type parameters `<T>`
- [x] **CTX-04**: Step component accepts `name: string` and `number: number` props for numbered workflow sections

## Parser/Emitter

- [x] **PAR-01**: Transformer recognizes all new components and converts to IR nodes
- [x] **PAR-02**: Emitter generates correct markdown for all new IR nodes
- [x] **PAR-03**: Unit tests cover each new component with expected input -> output

---

## Future Requirements (Deferred)

- Additional state providers (localfile, supabase, postgres)
- State migration tooling
- Config file support for build options
- Incremental compilation
- Parallel processing

## Out of Scope

- Breaking changes to existing component APIs — existing patterns continue to work
- Runtime JSX evaluation — remain compile-time only
- React compatibility — this is not React, just uses TSX syntax

---

## Traceability

| REQ-ID | Phase | Plan | Status |
|--------|-------|------|--------|
| ORG-01 | 20 | 20-01 | Complete |
| ORG-02 | 20 | 20-02 | Complete |
| ORG-03 | 20 | 20-01 | Complete |
| SEM-01 | 22 | 22-01 | Complete |
| SEM-02 | 22 | 22-01 | Complete |
| SEM-03 | 22 | 22-02 | Complete |
| SEM-04 | 22 | 22-02 | Complete |
| SEM-05 | 22 | 22-02 | Complete |
| SEM-06 | 22 | 22-02 | Complete |
| SEM-07 | 22 | 22-02 | Complete |
| PROP-01 | 21 | 21-01, 21-02 | Complete |
| PROP-02 | 21 | 21-01, 21-02 | Complete |
| CTX-01 | 23 | 23-01 | Complete |
| CTX-02 | 23 | 23-01 | Complete |
| CTX-03 | 23 | 23-02 | Complete |
| CTX-04 | 23 | 23-03 | Complete |
| PAR-01 | 24 | 24-01, 24-02 | Complete |
| PAR-02 | 24 | 24-01, 24-02 | Complete |
| PAR-03 | 24 | 24-01, 24-02 | Complete |

---

## Milestone Summary

**Shipped:** 17 of 17 v2.0 requirements (100%)
**Adjusted:** None
**Dropped:** None

---

*Archived: 2026-01-31 as part of v2.0 milestone completion*
